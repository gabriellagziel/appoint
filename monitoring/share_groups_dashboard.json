{
  "dashboard": {
    "name": "Share-in-Groups Monitoring",
    "description": "Monitor share-in-groups functionality and security metrics",
    "panels": [
      {
        "title": "Share Link Analytics",
        "type": "timeseries",
        "metrics": [
          {
            "name": "share_link_created",
            "description": "Number of share links created",
            "alert_threshold": 1000
          },
          {
            "name": "share_link_clicked", 
            "description": "Number of share links clicked",
            "alert_threshold": 500
          },
          {
            "name": "share_link_ctr",
            "description": "Click-through rate",
            "calculation": "share_link_clicked / share_link_created",
            "alert_threshold": 0.1
          }
        ]
      },
      {
        "title": "Group Engagement",
        "type": "timeseries", 
        "metrics": [
          {
            "name": "group_member_joined_from_share",
            "description": "Group members joined from share links",
            "alert_threshold": 100
          },
          {
            "name": "rsvp_submitted_from_share",
            "description": "RSVPs submitted from share links",
            "alert_threshold": 200
          }
        ]
      },
      {
        "title": "Security Metrics",
        "type": "timeseries",
        "metrics": [
          {
            "name": "rate_limit_denials",
            "description": "Rate limit denials (create_share_link, guest_rsvp)",
            "alert_threshold": 50
          },
          {
            "name": "invalid_guest_tokens",
            "description": "Invalid guest tokens (tampered/expired)",
            "alert_threshold": 10
          },
          {
            "name": "revoked_share_links",
            "description": "Revoked/expired share link hits",
            "alert_threshold": 20
          }
        ]
      },
      {
        "title": "Error Rates",
        "type": "timeseries",
        "metrics": [
          {
            "name": "public_page_render_errors",
            "description": "Public page render errors",
            "alert_threshold": 5
          },
          {
            "name": "rsvp_write_denials",
            "description": "RSVP write denials (rules)",
            "alert_threshold": 10
          }
        ]
      },
      {
        "title": "Performance",
        "type": "timeseries",
        "metrics": [
          {
            "name": "public_page_p95_latency",
            "description": "Public page p95 latency (ms)",
            "alert_threshold": 600
          },
          {
            "name": "share_link_creation_latency",
            "description": "Share link creation latency (ms)",
            "alert_threshold": 1000
          }
        ]
      }
    ],
    "alerts": [
      {
        "name": "High Error Rate",
        "condition": "public_page_render_errors > 5 OR rsvp_write_denials > 10",
        "severity": "critical"
      },
      {
        "name": "Security Alert",
        "condition": "invalid_guest_tokens > 10 OR revoked_share_links > 20",
        "severity": "warning"
      },
      {
        "name": "Performance Degradation",
        "condition": "public_page_p95_latency > 600",
        "severity": "warning"
      }
    ]
  }
}
