<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request API Access ‚Äì App-Oint Enterprise</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f9fafb;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 0.5em;
            color: #0f172a;
        }

        h2 {
            font-size: 1.25rem;
            color: #475569;
            margin-top: 2em;
        }

        form {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        label {
            font-weight: 600;
        }

        input,
        select,
        textarea {
            padding: 12px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
        }

        textarea {
            resize: vertical;
        }

        button {
            background: #2563eb;
            color: #fff;
            border: none;
            padding: 14px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        button:hover {
            background: #1d4ed8;
        }

        .notice,
        .disclaimer {
            font-size: 0.875rem;
            color: #475569;
            margin-top: 1em;
            line-height: 1.6;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .checkbox-group input {
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Request API Access</h1>
        <p>Get started with App-Oint Enterprise API in minutes</p>

        <button onclick="fillDemoData()">Fill Demo Data</button>

        <h2>üöÄ What happens next?</h2>
        <p class="notice">After submitting this form, you'll receive instant API access with your unique key. You can
            start integrating immediately and will be invoiced monthly based on usage.</p>

        <form id="registerForm">
            <label>Company Name *</label>
            <input type="text" name="companyName" required>

            <label>Website *</label>
            <input type="url" name="website" placeholder="https://yourcompany.com" required>

            <label>Company Address *</label>
            <input type="text" name="address" required>

            <label>VAT Number</label>
            <input type="text" name="vat">

            <label>Business Registration Number</label>
            <input type="text" name="registration">

            <label>Country *</label>
            <select name="country" required>
                <option value="">Select country</option>
                <!-- country list dynamically rendered -->
            </select>

            <label>Preferred Currency *</label>
            <select name="currency" required>
                <option value="">Select currency</option>
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
            </select>

            <label>Billing Email *</label>
            <input type="email" name="billingEmail" placeholder="billing@yourcompany.com" required>

            <label>Legal Representative Name</label>
            <input type="text" name="rep">

            <label>Tax ID / EIN</label>
            <input type="text" name="taxId">

            <label>First Name *</label>
            <input type="text" name="firstName" required>

            <label>Last Name *</label>
            <input type="text" name="lastName" required>

            <label>Email Address *</label>
            <input type="email" name="email" required>

            <label>Phone Number</label>
            <input type="tel" name="phone">

            <label>Expected Monthly Usage</label>
            <select name="usage">
                <option value="">Select usage range</option>
                <option value="0-100">0‚Äì100 meetings</option>
                <option value="100-500">100‚Äì500 meetings</option>
                <option value="500+">500+ meetings</option>
            </select>

            <label>How will you use the API? *</label>
            <textarea name="intent" rows="4" required></textarea>

            <label>Industry / Sector</label>
            <select name="industry">
                <option value="">Select industry</option>
                <option>Healthcare</option>
                <option>Education</option>
                <option>Real Estate</option>
                <option>Other</option>
            </select>

            <label>Company Size</label>
            <select name="size">
                <option value="">Select company size</option>
                <option>1-10</option>
                <option>11-50</option>
                <option>51-200</option>
                <option>200+</option>
            </select>

            <div class="checkbox-group">
                <input type="checkbox" name="tos" required>
                <label>I agree to the <a href="/terms.html">Terms of Service</a> and <a href="/privacy.html">Privacy
                        Policy</a> *</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" name="marketing">
                <label>I agree to receive marketing communications about App-Oint Enterprise API updates and
                    features</label>
            </div>

            <button type="submit">Request API Access</button>
        </form>

        <div class="disclaimer">
            <p><strong>Data Protection Notice:</strong> By submitting this form, you consent to the processing of your
                personal data in accordance with our Privacy Policy. Your data will be used to provide API access and
                related services. You may withdraw consent at any time by contacting us.</p>
            <p><strong>Billing Information:</strong> You will receive monthly invoices based on API usage. Payment is
                due within 7-10 business days via bank transfer. Late payments may result in service suspension. All
                prices are subject to applicable taxes.</p>
            <p><strong>Tax Compliance:</strong> We are required to collect and report tax information based on your
                business location. Please ensure all tax information provided is accurate and up-to-date.</p>
            <p><strong>GDPR Compliance:</strong> We process your data lawfully, fairly, and transparently. You have the
                right to access, rectify, or erase your personal data. Contact us at privacy@app-oint.com for data
                requests.</p>
        </div>
        <p style="margin-top: 2em"><a href="/">‚Üê Back to API Overview</a></p>
    </div>

    <script>
        function fillDemoData() {
            document.querySelector('input[name=companyName]').value = 'Demo Corp';
            document.querySelector('input[name=website]').value = 'https://democorp.com';
            document.querySelector('input[name=address]').value = '1 Example Street, City, 12345, Country';
            document.querySelector('input[name=billingEmail]').value = 'billing@democorp.com';
            document.querySelector('input[name=firstName]').value = 'Alice';
            document.querySelector('input[name=lastName]').value = 'Smith';
            document.querySelector('input[name=email]').value = 'alice@democorp.com';
            document.querySelector('textarea[name=intent]').value = 'We plan to integrate with App-Oint to manage client appointments from our CRM.';
        }

        // Populate dropdowns on page load
        function populateDropdowns() {
            // Countries
            const countrySelect = document.querySelector('select[name="country"]');
            const countries = [
                "United States", "United Kingdom", "Germany", "France", "Italy",
                "Spain", "Canada", "Australia", "Netherlands", "Israel",
                "Sweden", "Norway", "Switzerland", "India", "Brazil",
                "Japan", "South Korea", "Mexico", "South Africa", "Other"
            ];

            countries.forEach(country => {
                const option = document.createElement("option");
                option.value = country;
                option.textContent = country;
                countrySelect.appendChild(option);
            });

            // Industries
            const industrySelect = document.querySelector('select[name="industry"]');
            const industries = [
                "Technology / Software", "Healthcare", "Finance / Banking",
                "Consulting", "Education", "Retail / E-commerce",
                "Manufacturing", "Real Estate", "Legal Services",
                "Marketing / Advertising", "Government", "Non-profit",
                "Transportation", "Energy", "Media / Entertainment", "Other"
            ];

            industries.forEach(industry => {
                const option = document.createElement("option");
                option.value = industry;
                option.textContent = industry;
                industrySelect.appendChild(option);
            });

            // Company Sizes
            const sizeSelect = document.querySelector('select[name="size"]');
            const sizes = [
                "1-10 employees", "11-50 employees", "51-200 employees",
                "201-1000 employees", "1000+ employees"
            ];

            sizes.forEach(size => {
                const option = document.createElement("option");
                option.value = size;
                option.textContent = size;
                sizeSelect.appendChild(option);
            });

            // Usage ranges
            const usageSelect = document.querySelector('select[name="usage"]');
            const usageRanges = [
                "0-100 meetings", "100-500 meetings", "500-1000 meetings",
                "1000-5000 meetings", "5000+ meetings"
            ];

            usageRanges.forEach(usage => {
                const option = document.createElement("option");
                option.value = usage;
                option.textContent = usage;
                usageSelect.appendChild(option);
            });
        }

        // Initialize dropdowns when page loads
        document.addEventListener('DOMContentLoaded', populateDropdowns);

        // Add form submission handler with demo credentials
        document.getElementById('registerForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = Object.fromEntries(formData);

            // Show loading state
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Submitting...';
            submitButton.disabled = true;

            try {
                // Call the Firebase function
                const response = await fetch('/registerBusiness', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    // Success - redirect to success page with API key
                    const successUrl = `/success.html?key=${result.apiKey}&id=${result.id}&status=${result.status}`;
                    window.location.href = successUrl;
                } else {
                    // Error handling
                    const errorMessage = result.error || 'Registration failed';
                    const missingFields = result.missingFields ? `\nMissing fields: ${result.missingFields.join(', ')}` : '';
                    alert(`‚ùå Registration Error: ${errorMessage}${missingFields}`);
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('‚ùå Network error. Please try again or contact support.');
            } finally {
                // Reset button state
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        });
    </script>
</body>

</html>